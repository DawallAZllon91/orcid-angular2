"use strict";(globalThis.webpackChunkng_orcid=globalThis.webpackChunkng_orcid||[]).push([[692],{"./src/stories/visibility-selector.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorVisibilitySelector:()=>ErrorVisibilitySelector,LimitedVisibilitySelector:()=>LimitedVisibilitySelector,PrivateVisibilitySelector:()=>PrivateVisibilitySelector,PublicVisibilitySelector:()=>PublicVisibilitySelector,VisibilitySelectorGroupEdit:()=>VisibilitySelectorGroupEdit,VisibilitySelectorMultiEdit:()=>VisibilitySelectorMultiEdit,VisibilitySelectorSingleEdit:()=>VisibilitySelectorSingleEdit,default:()=>visibility_selector_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2020/common.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2020/animations.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs");var fesm2020_forms=__webpack_require__("./node_modules/@angular/forms/fesm2020/forms.mjs");const WINDOW=new core.InjectionToken("WindowToken");class WindowRef{get nativeWindow(){throw new Error("Not implemented.")}}let BrowserWindowRef=class BrowserWindowRef extends WindowRef{constructor(){window.outOfRouterNavigation||(window.outOfRouterNavigation=value=>{window.location.href=value}),super()}get nativeWindow(){return window}};BrowserWindowRef.ctorParameters=()=>[],BrowserWindowRef=(0,tslib_es6.gn)([(0,core.Injectable)()],BrowserWindowRef);const WINDOW_PROVIDERS=[{provide:WindowRef,useClass:BrowserWindowRef},{provide:WINDOW,useFactory:function windowFactory(browserWindowRef,platformId){return(0,common.isPlatformBrowser)(platformId)?browserWindowRef.nativeWindow:new Object},deps:[WindowRef,core.PLATFORM_ID]}];let WindowModule=class WindowModule{};WindowModule=(0,tslib_es6.gn)([(0,core.NgModule)({declarations:[],imports:[],providers:[WINDOW_PROVIDERS]})],WindowModule);let VisibilitySelectorComponent=class VisibilitySelectorComponent{constructor(window){this.window=window,this.multiEdit="single",this.editable=!0,this.ariaLabelPublic=$localize`:@@share.ariaLabelPublic:set item visibility to Everyone`,this.ariaLabelTrustedParty=$localize`:@@share.ariaLabelTrustedParty:set item visibility to Trusted Parties `,this.ariaLabelPrivate=$localize`:@@share.ariaLabelPrivate:set item visibility to Only Me`,this.ariaLabelCurrentlySelected=$localize`:@@share.currentSelected: (Currently selected)`,this.ariaLabelVisibility=$localize`:@@share.visibilityCurrentlySetTo:visibility is currently set to`}set privacy(value){this._privacy=value}get privacy(){return this._privacy}ngOnInit(){}private(){this.privacy="PRIVATE",this.visibilityError=!1,this.updateAriaLabel(this.privacy),this.onChange(this.privacy),this.onTouched(this.privacy)}limited(){this.privacy="LIMITED",this.visibilityError=!1,this.updateAriaLabel(this.privacy),this.onChange(this.privacy),this.onTouched(this.privacy)}public(){this.privacy="PUBLIC",this.visibilityError=!1,this.updateAriaLabel(this.privacy),this.onChange(this.privacy),this.onTouched(this.privacy)}writeValue(visibility){this.updateAriaLabel(visibility),this.privacy=visibility}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){throw new Error("Method not implemented.")}navigate(){this.window.open("https://support.orcid.org/hc/en-us/articles/360006897614-Visibility-settings")}updateAriaLabel(visibility){switch(visibility){case"PUBLIC":this.mainButtonLabel=this.ariaLabelVisibility+" "+$localize`:@@register.VisibilityEveryone:Everyone`;break;case"PRIVATE":this.mainButtonLabel=this.ariaLabelVisibility+" "+$localize`:@@shared.onlyMe:Only me`;break;case"LIMITED":this.mainButtonLabel=this.ariaLabelVisibility+" "+$localize`:@@account.trusted:Trusted`}}};VisibilitySelectorComponent.ctorParameters=()=>[{type:Window,decorators:[{type:core.Inject,args:[WINDOW]}]}],VisibilitySelectorComponent.propDecorators={multiEdit:[{type:core.Input}],editable:[{type:core.Input}],ariaLabelPublic:[{type:core.Input}],ariaLabelTrustedParty:[{type:core.Input}],ariaLabelPrivate:[{type:core.Input}],itemTitle:[{type:core.Input}],visibilityError:[{type:core.Input}],privacy:[{type:core.Input}]},VisibilitySelectorComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"app-visibility-selector",template:'<button\n  [ngClass]="{\n    \'not-editable\': !editable\n  }"\n  [disabled]="!editable"\n  mat-button\n  [matMenuTriggerFor]="menu"\n  class="main-menu"\n  [attr.aria-label]="(itemTitle || \'\') + \' \' + mainButtonLabel"\n>\n  <div class="main-button-container">\n    <div class="icon-title-container">\n      <mat-icon\n        class="menu-icon"\n        [ngClass]="{\n          limitedIcon: privacy === \'LIMITED\',\n          publicIcon: privacy === \'PUBLIC\',\n          privateIcon: privacy === \'PRIVATE\'\n        }"\n        >visibility</mat-icon\n      >\n\n      <ng-container\n        *ngIf="privacy === \'PUBLIC\'"\n        i18n="@@register.VisibilityEveryone"\n        >Everyone</ng-container\n      >\n      <ng-container *ngIf="privacy === \'LIMITED\'" i18n="@@account.trusted"\n        >Trusted</ng-container\n      >\n      <ng-container\n        *ngIf="privacy === \'PRIVATE\'"\n        i18n="@@register.VisibilityPrivate"\n        >Only me</ng-container\n      >\n    </div>\n    <mat-icon *ngIf="editable" class="arrow-drop-down"\n      >arrow_drop_down</mat-icon\n    >\n  </div>\n</button>\n<mat-menu #menu="matMenu">\n  <div class="visibilityTitleContainer">\n    <h1 class="orc-font-body" i18n="@@shared.setVisibilityFor">\n      Set visibility for\n    </h1>\n    <i\n      class="orc-font-body-small"\n      *ngIf="multiEdit === \'single\'"\n      i18n="@@shared.thisItemOnly"\n      >This item only</i\n    >\n    <i\n      class="orc-font-body-small"\n      *ngIf="multiEdit === \'multi\'"\n      i18n="@@shared.allItemsInThisGroup"\n      >All items in this group</i\n    >\n    <i\n      class="orc-font-body-small"\n      *ngIf="multiEdit === \'selected\'"\n      i18n="@@shared.selectedItemsForVisibility"\n      >Selected items\n    </i>\n  </div>\n  <button\n    [attr.aria-label]="\n      ariaLabelPublic + (privacy === \'PUBLIC\' ? ariaLabelCurrentlySelected : \'\')\n    "\n    mat-menu-item\n    (click)="public()"\n    [ngClass]="{\n      noSelectedMenu: privacy !== \'PUBLIC\' || visibilityError,\n      selectedMenu: privacy === \'PUBLIC\' && !visibilityError\n    }"\n    class="public-button cy-visibility-public"\n  >\n    <div class="icon-circle icon-public">\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        width="25"\n        height="25"\n        viewBox="0 0 32 32"\n      >\n        <g fill-rule="evenodd" transform="translate(2 8)">\n          <path\n            d="M4.89285309,3 C6.32345505,3 7.48318708,4.198431 7.48318708,6.16476204 C7.48318708,7.39927189 7.02606362,8.48703297 6.33177897,9.12571199 L6.33192132,9.85514246 C6.93430296,9.95767004 7.48953333,10.1208324 7.99761243,10.3446296 C6.59349146,10.931755 5.4631016,11.8164312 4.6050382,13 L4.609,12.995 L-7.54951657e-15,12.9951477 L-7.54951657e-15,11.5705277 C0.76712784,10.590195 1.9183686,10.0004474 3.45372228,9.8012851 L3.45313835,9.12498602 C2.75929632,8.48620889 2.3025191,7.39880427 2.3025191,6.16476204 C2.3025191,4.198431 3.46225113,3 4.89285309,3 Z"\n          />\n          <path\n            d="M24.8904655,3 C26.3210675,3 27.4807995,4.198431 27.4807995,6.16476204 C27.4807995,7.39927189 27.0236761,8.48703297 26.3293914,9.12571199 L26.3295337,9.85514246 C26.9319154,9.95767004 27.4871458,10.1208324 27.9952249,10.3446296 C26.5911039,10.931755 25.460714,11.8164312 24.6026506,13 L24.6066124,12.995 L19.9976124,12.9951477 L19.9976124,11.5705277 C20.7647403,10.590195 21.915981,10.0004474 23.4513347,9.8012851 L23.4507508,9.12498602 C22.7569087,8.48620889 22.3001315,7.39880427 22.3001315,6.16476204 C22.3001315,4.198431 23.4598636,3 24.8904655,3 Z"\n            transform="matrix(-1 0 0 1 47.993 0)"\n          />\n          <path\n            d="M13.9976124,0 C16.3766852,0 17.8888022,1.83293682 17.8888022,4.84033613 C17.8888022,6.60373271 17.3689221,8.17135716 16.4592223,9.1665201 L16.4593096,10.4940226 C18.7142116,10.8564413 20.5603125,11.6917671 21.9976124,13 L21.9976124,16 L5.99761243,16 L5.99761243,13 C7.23371328,11.5789972 9.07977703,10.7159448 11.5358037,10.4108427 L11.536008,9.18074833 C10.6617792,8.21159109 10.1619793,6.6729659 10.1064226,4.84033613 C10.0106366,1.68067227 11.6185397,0 13.9976124,0 Z"\n          />\n        </g>\n      </svg>\n    </div>\n    <div class="title-container" i18n="@@register.VisibilityEveryone">\n      Everyone\n    </div>\n  </button>\n  <button\n    mat-menu-item\n    aria-label="visibility limited"\n    [attr.aria-label]="\n      ariaLabelTrustedParty +\n      (privacy === \'LIMITED\' ? ariaLabelCurrentlySelected : \'\')\n    "\n    (click)="limited()"\n    [ngClass]="{\n      noSelectedMenu: privacy !== \'LIMITED\' || visibilityError,\n      selectedMenu: privacy === \'LIMITED\' && !visibilityError\n    }"\n    class="limited-button cy-visibility-limited"\n  >\n    <div class="icon-circle icon-limited">\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        width="25"\n        height="25"\n        viewBox="0 0 32 32"\n      >\n        <path\n          d="M21.3241161,1.2027958 L21.3241161,4.80204218 L16.802377,4.80204218 L16.802377,6.00179097 L21.3241161,6.00179097 L21.3241161,9.60103736 L16.802377,9.60103736 L16.8025334,13.9532859 C20.1760796,14.7070044 22.7027958,17.7951245 22.7027958,21.490125 C22.7027958,25.7497154 19.3449314,29.2027958 15.2027958,29.2027958 C11.0606602,29.2027958 7.7027958,25.7497154 7.7027958,21.490125 C7.7027958,17.8976017 10.0913034,14.8787633 13.3243619,14.0213468 L13.3241161,1.2027958 L21.3241161,1.2027958 Z M15.2027958,16.8625225 C12.7175144,16.8625225 10.7027958,18.9343707 10.7027958,21.490125 C10.7027958,24.0458793 12.7175144,26.1177275 15.2027958,26.1177275 C17.6880772,26.1177275 19.7027958,24.0458793 19.7027958,21.490125 C19.7027958,18.9343707 17.6880772,16.8625225 15.2027958,16.8625225 Z"\n          transform="rotate(45 15.203 15.203)"\n        />\n      </svg>\n    </div>\n    <div class="title-container" i18n="@@account.trustedParties">\n      Trusted Parties\n    </div>\n  </button>\n  <button\n    aria-label="visibility private"\n    [attr.aria-label]="\n      ariaLabelPrivate +\n      (privacy === \'PRIVATE\' ? ariaLabelCurrentlySelected : \'\')\n    "\n    mat-menu-item\n    (click)="private()"\n    class="private-button cy-visibility-private"\n    [ngClass]="{\n      noSelectedMenu: privacy !== \'PRIVATE\' || visibilityError,\n      selectedMenu: privacy === \'PRIVATE\' && !visibilityError\n    }"\n  >\n    <div class="icon-circle icon-private">\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        width="25"\n        height="25"\n        viewBox="0 0 32 32"\n      >\n        <path\n          fill-rule="evenodd"\n          d="M20.5833333,8.75 C20.5833333,8.23716416 20.1972931,7.81449284 19.6999545,7.75672773 L19.5833333,7.75 L12.4166667,7.75 C11.9038308,7.75 11.4811595,8.13604019 11.4233944,8.63337887 L11.4166667,8.75 L11.4166667,12.3333333 L8.66666667,12.3333333 L8.66666667,10 C8.66666667,7.23857625 10.9052429,5 13.6666667,5 L18.3333333,5 C21.0947571,5 23.3333333,7.23857625 23.3333333,10 L23.3333333,12.3333333 L25,12.3333333 C26.1045695,12.3333333 27,13.2287638 27,14.3333333 L27,25 C27,26.1045695 26.1045695,27 25,27 L7,27 C5.8954305,27 5,26.1045695 5,25 L5,14.3333333 C5,13.2287638 5.8954305,12.3333333 7,12.3333333 L20.5833333,12.3333333 L20.5833333,8.75 Z M16,16 C15.0381041,16 14.2492271,16.7407822 14.1727441,17.6829715 L14.1666667,17.8333333 L14.1666667,21.5 C14.1666667,22.512522 14.987478,23.3333333 16,23.3333333 C16.9618959,23.3333333 17.7507729,22.5925511 17.8272559,21.6503618 L17.8333333,21.5 L17.8333333,17.8333333 C17.8333333,16.8208113 17.012522,16 16,16 Z"\n        />\n      </svg>\n    </div>\n    <div class="title-container" i18n="@@shared.onlyMe">Only me</div>\n  </button>\n\n  <button\n    mat-menu-item\n    (click)="navigate()"\n    class="underline wrap-menu-item"\n    i18n="@@shared.moreInformationOnOrcidVisibility"\n  >\n    More information on ORCID visibility settings\n  </button>\n</mat-menu>\n',providers:[{provide:fesm2020_forms.JU,useExisting:(0,core.forwardRef)((()=>VisibilitySelectorComponent)),multi:!0}],styles:[".visibilityTitleContainer,\n.urlContainer {\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n}\n\n.icon-circle {\n  display: flex;\n  height: 32px;\n  width: 32px;\n  border-radius: 50%;\n  align-items: center;\n  justify-content: center;\n  margin-inline-end: 16px;\n}\n\n[mat-menu-item] {\n  display: flex;\n  align-items: center;\n}\n\n.main-menu {\n  border: solid 1px;\n  height: 40px;\n}\n\n.menu-icon {\n  margin-right: 6px;\n}\n\n[mat-button] {\n  min-width: 140px;\n  display: flex;\n  justify-content: space-around;\n}\n\n.selectedMenu .title-container {\n  font-weight: bold;\n}\n\n.main-button-container {\n  display: flex;\n  align-items: center;\n}\n\n.main-button-container .icon-title-container {\n  min-width: 100px;\n  display: flex;\n  align-items: center;\n  font-weight: 400;\n}\n\n.arrow-drop-down {\n  width: 17px;\n}\n\n.wrap-menu-item {\n  white-space: normal;\n  line-height: 1.6;\n  max-width: 220px;\n  text-decoration: underline;\n}\n\nh1 {\n  line-height: 1;\n  margin: 0;\n  padding: 0;\n  margin-bottom: 4px;\n}\n\n:host ::ng-deep .mat-button-disabled .icon-title-container {\n  color: initial;\n}\n\n.mat-button-disabled.main-menu {\n  border: none;\n}",".panel {\n  background-color: #f5f5f5;\n}\n\n.panel.white-background {\n  background-color: white;\n}\n\n::ng-deep .no-selected svg > g,\n::ng-deep .no-selected svg > path {\n  fill: #bdbdbd;\n}\n\n::ng-deep .selected svg > g,\n::ng-deep .selected svg > path {\n  fill: #ffffff;\n}\n\n::ng-deep .panel button {\n  background-color: #ffffff;\n}\n\n::ng-deep button.private-button.selected {\n  background-color: #ab1600;\n}\n\n::ng-deep button.limited-button.selected {\n  background-color: #ffbd32;\n}\n\n::ng-deep button.public-button.selected {\n  background-color: #00a500;\n}\n\n.privacy-selector {\n  background-color: #ffffff;\n  border-color: #bdbdbd;\n}\n\n.limitedIcon {\n  color: #ffbd32;\n}\n\n.privateIcon {\n  color: #ab1600;\n}\n\n.publicIcon {\n  color: #00a500;\n}\n\n.main-menu {\n  border: solid 1px;\n}\n\nsvg path {\n  fill: black;\n}\n\n.icon-public,\n.icon-private,\n.icon-limited {\n  background-color: #fafafa;\n}\n\n.selectedMenu .icon-public {\n  background: #00a500;\n}\n\n.selectedMenu .icon-public svg path {\n  fill: white;\n}\n\n.selectedMenu .icon-private {\n  background: #ab1600;\n}\n\n.selectedMenu .icon-private svg path {\n  fill: white;\n}\n\n.selectedMenu .icon-limited {\n  background: #ffbd32;\n}\n\n.selectedMenu .icon-limited svg path {\n  fill: white;\n}\n\n::ng-deep .mat-menu-item.selectedMenu.private-button:not([disabled]) {\n  background: rgba(171, 22, 0, 0.05);\n}\n\n::ng-deep .mat-menu-item.selectedMenu.limited-button:not([disabled]) {\n  background: rgba(255, 189, 50, 0.05);\n}\n\n::ng-deep .mat-menu-item.selectedMenu.public-button:not([disabled]) {\n  background: rgba(0, 165, 0, 0.05);\n}\n\n::ng-deep .mat-menu-item.selectedMenu.private-button:hover:not([disabled]) {\n  background: rgba(171, 22, 0, 0.05);\n}\n\n::ng-deep .mat-menu-item.selectedMenu.limited-button:hover:not([disabled]) {\n  background: rgba(255, 189, 50, 0.05);\n}\n\n::ng-deep .mat-menu-item.selectedMenu.public-button:hover:not([disabled]) {\n  background: rgba(0, 165, 0, 0.05);\n}\n\n.main-menu {\n  border-color: #bdbdbd;\n}\n\n.wrap-menu-item {\n  color: #2e7f9f;\n}"]})],VisibilitySelectorComponent);var fesm2020_button=__webpack_require__("./node_modules/@angular/material/fesm2020/button.mjs"),menu=__webpack_require__("./node_modules/@angular/material/fesm2020/menu.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2020/icon.mjs");let VisibilitySelectorModule=class VisibilitySelectorModule{};VisibilitySelectorModule=(0,tslib_es6.gn)([(0,core.NgModule)({declarations:[VisibilitySelectorComponent],imports:[common.CommonModule,fesm2020_button.ot,menu.Tx,icon.Ps],exports:[VisibilitySelectorComponent]})],VisibilitySelectorModule);const visibility_selector_stories={title:"VisibilitySelector",component:VisibilitySelectorComponent,tags:["autodocs"],render:args=>({props:args}),decorators:[(0,dist.moduleMetadata)({imports:[common.CommonModule,animations.BrowserAnimationsModule,VisibilitySelectorModule,fesm2020_forms.u5,fesm2020_forms.UX],providers:[WINDOW_PROVIDERS]})],parameters:{layout:"fullscreen"}},PublicVisibilitySelector={args:{privacy:"PUBLIC"}},LimitedVisibilitySelector={args:{privacy:"LIMITED"}},PrivateVisibilitySelector={args:{privacy:"PRIVATE"}},ErrorVisibilitySelector={args:{privacy:"PRIVATE",visibilityError:!0}},VisibilitySelectorMultiEdit={args:{privacy:"PUBLIC",visibilityError:!0,multiEdit:"multi"}},VisibilitySelectorSingleEdit={args:{privacy:"PUBLIC",multiEdit:"single"}},VisibilitySelectorGroupEdit={args:{privacy:"PUBLIC",multiEdit:"selected"}}}}]);