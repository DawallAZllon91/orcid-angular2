import { moduleMetadata } from '@storybook/angular'
import { Story, Meta } from '@storybook/addon-docs/blocks'

<Meta
  title="Docs|Theaming"
  decorators={[moduleMetadata({ imports: [] })]}
  parameters={{ order: 3 }}
/>

## Theaming components

While creating new components usually colors from the design foundation are required. This document describes how to apply these colors.

To archive this angular/material use a SASS map `theme` that contains 5 different palettes.

### Orcid app palettes

These palettes define a background and foreground contrast for each hue value of the application colors.
The colors of these palettes can be extracted usign the functions `mat-color($palette-name, $hue)` or `mat-contrast ( $palette-name, $hue)`.

##### primary

<Story id="foundation-palette--primary" height="110px" />

##### accent

<Story id="foundation-palette--accent" height="110px" />

##### warn

<Story id="foundation-palette--warn" height="110px" />

### Light theme palettes

These palettes contain the colors used on many foreground and background elements of angular/material.
The colors can be extracted usign `mat-color($palette-name, $color-name)`.

##### foreground

<Story id="foundation-palette--foreground" height="140px" />

##### background

<Story id="foundation-palette--background" height="200px" />

### To use the palettes...

A `.scss` file can be created inside the component folder, with the purpose of declaring a theme mixin.

Following the name convection of `<component-name>.scss-theme.scss`

```
@import '~@angular/material/theming';
@mixin <component-name>-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $warn: map-get($theme, accent);
  $foreground: map-get($theme, foreground);
  $background: map-get($theme, background);

  app-<component-name> {
      // ADD CSS RULES
  }

}
```

This theming file exposes the lists palettes from the theme into the variables `$primary`, `$accent`, `$warn`, `$foreground` and `$background`.
To extract the colors `mat-color` and/or `mat-contrast` can be used.

‚ö†Ô∏èAfter declaring this mixing it must be imported and declared on `src/assets/scss/material.orcid-components.scss` to be declared globally for the application.

A simple example of this is the SearchComponent which uses colors from the background, the primary and accent palettes.

```
@mixin search-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $background: map-get($theme, background);

  app-search {
    .search-where {
      background-color: mat-color($background, dark-grey);
      color: mat-contrast($primary, 500);
    }
    .input-box {
      input::placeholder {
        color: mat-contrast($accent, 200);
      }
    }
  }
}
```

## üîßAdding/overwriting the colors of the palettes

### Orcid app palettes

The Orcid app palettes and it's contrast can be found on `src/assets/scss/material.palettes.scss`.

The warn palette is directly taken from the material library, if a change is required it can be added to `material.palettes.scss` and declared on `material.orcid-theme.scss`

### Light theme palettes

Angular material offers a light-theme with [predefined colors](https://github.com/angular/components/blob/8.1.4/src/material/core/theming/_palette.scss#L674-L745). This is used with some modifications.
If it's required to add or overwrite a color the file to do this is `src/assets/scss/material.light-theme.scss`

‚ö†Ô∏èIt's recomended to check what other elements are affect when a color is overwrited on the Orcid App and on the Angular Material library.
