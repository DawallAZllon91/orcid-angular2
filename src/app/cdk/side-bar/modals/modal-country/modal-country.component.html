<app-modal>
  <app-modal-header>Emails</app-modal-header>
  <app-modal-side-bar> Form content </app-modal-side-bar>
  <app-modal-footer>
    <button mat-raised-button color="primary" (click)="saveEvent()">
      Save changes
    </button>
    <button mat-stroked-button color="primary" (click)="closeEvent()">
      Cancel
    </button>
  </app-modal-footer>

  <div
    class="container"
    *ngIf="countryForm && countryCodes"
    [formGroup]="countryForm"
  >
    <div class="row">
      <div class="col">
        <p>
          Add countries to your ORCID record to highlight where you conduct your
          research or where your research is focused. You can add as many
          countries as you want.
        </p>
      </div>
    </div>
    <div class="row">
      <h3 class="col">My countries</h3>
    </div>

    <div
      class="row"
      cdkDropList
      (cdkDropListDropped)="drop($event)"
      class="country-wrapper"
    >
      <div
        cdkDrag
        cdkDragBoundary=".country-wrapper"
        class="row no-wrap"
        [formGroupName]="country.putCode"
        *ngFor="let country of countries"
      >
        <div class="col l12 m8 s4 top country-input-line no-wrap">
          <img cdkDragHandle src="./assets/vectors/draggable.svg" />

          <mat-form-field appearance="outline" class="mat-form-field-min">
            <mat-select formControlName="country">
              <mat-option
                *ngFor="let countryCode of countryCodes"
                [value]="countryCode.key"
              >
                {{ countryCode.key }}
              </mat-option>
            </mat-select>
            <mat-hint>
              Source: {{ getSourceName(countriesMap[country.putCode]) }},
              Created: {{ getDate(countriesMap[country.putCode]) | date }}
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col no-wrap actions-wrapper">
          <app-privacy-selector
            formControlName="visibility"
          ></app-privacy-selector>
          <button (click)="deleteEmail(country.putCode)" mat-icon-button>
            <mat-icon class="material-icons-outlined large-material-icon"
              >delete</mat-icon
            >
          </button>
        </div>
      </div>
    </div>

    <div class="row">
      <a class="col add-more-email">
        <mat-icon class="large-material-icon" (click)="addCountry()"
          >add_circle_outline
        </mat-icon>
        Add another email address</a
      >
    </div>
  </div>

  <mat-form-field>
    <input matInput />
  </mat-form-field>
</app-modal>
