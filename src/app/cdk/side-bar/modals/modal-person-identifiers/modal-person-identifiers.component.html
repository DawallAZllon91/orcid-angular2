<app-modal [loading]="loadingPersonalIdentifiers">
  <app-modal-header i18n="@@side-bar.personalIdentifiers"
    >Personal identifiers</app-modal-header
  >
  <app-modal-side-bar>
    <ng-container id="side-bar-title" i18n="@@side-bar.myPersonIdentifiers">
      My person identifiers</ng-container
    >
  </app-modal-side-bar>
  <app-modal-footer>
    <button
      mat-raised-button
      color="primary"
      (click)="saveEvent()"
      i18n="@@shared.saveChanges"
      id="save-pesonal-id-button"
    >
      Save changes
    </button>
    <button
      mat-stroked-button
      color="primary"
      (click)="closeEvent()"
      i18n="@@shared.cancel"
      id="cancel-personal-id-button"
    >
      Cancel
    </button>
  </app-modal-footer>

  <div class="container no-padding" [formGroup]="personIdentifiersForm">
    <div class="row">
      <div class="col no-gutters">
        <p>
          <ng-container i18n="@@side-bar.person-identifiers-description">
            Person identifiers are other identifiers that systems use to
            identify you, such as ResearcherID or Scopus Author ID. These
            identifiers can only be added by trusted organizations linked with
            your ORCID record. Find out more on our
          </ng-container>
          <a
            target="_blank"
            rel="noopener noreferrer"
            href="https://support.orcid.org/hc/en-us/articles/360006894854"
            i18n="@@side-bar.person-identifiers-support"
            >Person identifiers support page.</a
          >
        </p>
      </div>
    </div>
    <div class="row">
      <h3 class="col no-gutters" i18n="@@side-bar.myPersonIdentifiers">
        My person identifiers
      </h3>
    </div>

    <div
      class="row"
      id="ids-list"
      cdkDropList
      (cdkDropListDropped)="drop($event)"
      class="personal-identifier-wrapper"
    >
      <div
        cdkDrag
        class="row personal-identifier-input-line"
        [ngClass]="{ 'no-wrap': !isMobile }"
        [formGroupName]="personIdentifier.putCode"
        *ngFor="let personIdentifier of personIdentifiers; index as i"
        [attr.id]="'draggable-' + i"
      >
        <div
          class="col l12 m8 s4 middle no-wrap no-gutters personal-identifiers-wrapper"
        >
          <img
            cdkDragHandle
            src="./assets/vectors/draggable.svg"
            aria-label="drag handle"
          />

          <label>
            {{
              personIdentifier.commonName + ': ' + personIdentifier.reference
            }}</label
          >
        </div>
        <div
          class="col no-wrap actions-wrapper no-gutters personal-identifiers-controls-wrapper"
        >
          <app-privacy-selector
            formControlName="visibility"
          ></app-privacy-selector>
          <button
            (click)="deletePersonalIdentifier(personIdentifier.putCode)"
            mat-icon-button
            class="delete-button"
          >
            <mat-icon class="material-icons-outlined large-material-icon"
              >delete</mat-icon
            >
          </button>
        </div>
      </div>
    </div>

    <div class="row"></div>
  </div>
</app-modal>
