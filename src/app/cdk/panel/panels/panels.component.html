<div class="col s4 m8 l12 no-gutters">
  <div
    class="header-container"
    [ngClass]="{
      'sub-peer-review': type === 'sub-peer-review'
    }"
  >
    <div class="inline-initial-side">
      <app-panel-expand-buttons
        (toggle)="collapse()"
        [openState]="expandedContent"
      ></app-panel-expand-buttons>

      <div class="text-container">
        <strong class="orc-font-body-large">
          {{ title }}
        </strong>
        <ng-container>
          <span *ngIf="currentAmount && total && currentAmount !== total"
            >({{ currentAmount }}
            <ng-container i18n="@@shared.of">of</ng-container>
            {{ total }})</span
          >
          <span *ngIf="(currentAmount && !total) || currentAmount === total">
            ({{ currentAmount }})
          </span>
          <span *ngIf="!currentAmount">(0)</span>
        </ng-container>
      </div>
    </div>

    <div class="controls" *ngIf="type !== 'sub-peer-review'">
      <ng-container *ngIf="!isPublicRecord && type !== 'research-resources'">
        <!-- ADD BUTTON: For panels with a single add option -->
        <button
          *ngIf="!addMenuOptions.length"
          mat-icon-button
          class="orc-font-body-small"
          [attr.aria-label]="labelAddButton"
          (click)="add()"
        >
          <mat-icon class="large-material-icon" id="add-button">
            add_circle
          </mat-icon>
          <ng-container i18n="@@shared.add"> Add </ng-container>
        </button>
        <!-- ADD BUTTON: For panels with a multiple add options -->
        <button
          mat-icon-button
          class="orc-font-body-small"
          [attr.aria-label]="labelAddButton"
          (click)="add()"
          [matMenuTriggerFor]="addMenu"
          *ngIf="addMenuOptions.length"
        >
          <mat-icon class="large-material-icon" id="add-button">
            add_circle
          </mat-icon>
          <ng-container i18n="@@shared.add"> Add </ng-container>
        </button>
      </ng-container>

      <mat-menu #addMenu="matMenu">
        <button
          mat-menu-item
          *ngFor="let option of addMenuOptions"
          (click)="add(option.action)"
        >
          {{ option.label }}
        </button>
      </mat-menu>
      <button
        mat-button
        class="orc-font-body-small"
        [attr.aria-label]="labelSortButton"
        [matMenuTriggerFor]="menu"
      >
        <mat-icon class="large-material-icon"> sort </mat-icon>
        <ng-container i18n="@@shared.sort"> Sort </ng-container>
      </button>
      <mat-menu #menu="matMenu">
        <button
          mat-menu-item
          (click)="sortChange(option)"
          *ngFor="let option of sortTypes"
        >
          {{ option | sortLabel }}
          <mat-icon
            class="large-material-icon"
            *ngIf="option === sortType && sortDirection === 'asc'"
          >
            south
          </mat-icon>
          <mat-icon
            class="large-material-icon"
            *ngIf="option === sortType && sortDirection === 'desc'"
          >
            north
          </mat-icon>
        </button>
      </mat-menu>
    </div>
  </div>
</div>
<div class="col s4 m8 l12 content no-gutters" *ngIf="expandedContent">
  <ng-content></ng-content>
</div>
