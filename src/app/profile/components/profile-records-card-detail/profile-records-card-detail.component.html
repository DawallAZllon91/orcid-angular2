<div
  class="secondary-container mat-body-1"
  [@heightAnimationState]="detailShowData"
  (@heightAnimationState.done)="onAnimationEvent($event)"
>
  <!--
    TODO: If no details to display the following mat-divider should be hidden
  -->
  <mat-divider class="margin-top-2"></mat-divider>

  <!--
     Todo: some data section might be moved to the wrappers
     For example, if only Affiliations uses orgDisambiguated or affiliationDetails those
    sections might be projected from the wrapper-affiliations to clean up the
    profile-records-card-details component of nonreusable template section
  -->

  <div class="content">
    <div class="margin-top-1" *ngIf="orgDisambiguated">
      <div
        class="title-secondary-container"
        i18n="@@workspace_affiliations.organization_id"
      >
        Organization identifiers
      </div>
      <div>
        {{ orgDisambiguated?.sourceType }}
        <ng-container
          *ngIf="orgDisambiguated.sourceType && orgDisambiguated.sourceId"
          >:</ng-container
        >
        {{ orgDisambiguated?.sourceId }}
      </div>
      <div class="padding-level-2">
        {{ orgDisambiguated?.value }}
        <ng-container
          *ngIf="
            orgDisambiguated && orgDisambiguated.value && regionCityCountry
          "
          >:</ng-container
        >
        {{ regionCityCountry }}
      </div>
      <div class="padding-level-2 secondary-container-primary">
        <ng-container i18n="@@workspace_affiliations.external_ids"
          >Other organization identifiers provided by</ng-container
        >
        {{ orgDisambiguated.sourceType | titlecase }}
      </div>
      <div
        *ngFor="let org of orgDisambiguated.orgDisambiguatedExternalIdentifiers"
        class="padding-level-3"
      >
        {{ org.identifierType }}:
        <ng-container *ngIf="org.preferred && !isUrl(org.preferred)"
          >{{ org.preferred }} preferred</ng-container
        >
        <ng-container *ngIf="org.preferred && isUrl(org.preferred)">
          <a target="orcid-app" href="{{ org.preferred }} ">
            {{ org.preferred }} preferred</a
          >
        </ng-container>

        <ng-container *ngFor="let id of org.all">
          <ng-container *ngIf="id != org.preferred && !isUrl(id)">{{
            id
          }}</ng-container>
          <ng-container *ngIf="id != org.preferred && isUrl(id)">
            <a target="orcid-app" href="{{ id }}"> {{ id }}</a>
          </ng-container>
        </ng-container>
      </div>
    </div>

    <div
      *ngIf="
        affiliationDetails &&
        affiliationDetails.url &&
        affiliationDetails.url.value
      "
      class="single-line margin-top-2"
    >
      <div class="title-secondary-container">URL</div>
      <a href="{{ affiliationDetails?.url.value }}"
        >{{ affiliationDetails?.url.value }}
      </a>
    </div>
    <ng-content></ng-content>
  </div>
  <mat-divider></mat-divider>

  <div class="date-container mat-small">
    <div>
      <div class="date-title mat-small">Added:</div>
      <div class="mat-small" *ngIf="createdDate">
        {{ createdDate | monthDayYearDateToString }}
      </div>
    </div>
    <div>
      <div class="date-title mat-small">Last Modified:</div>
      <div class="mat-small" *ngIf="lastModified">
        {{ lastModified | monthDayYearDateToString }}
      </div>
    </div>
  </div>
</div>

<div
  class="spinner-container"
  [@heightAnimationState]="{
    value: detailShowLoader,
    params: { closeOpacity: 0 }
  }"
>
  <mat-progress-spinner [diameter]="40" color="primary" mode="indeterminate">
  </mat-progress-spinner>
</div>

<app-offline-message
  [@heightAnimationState]="detailShowOffline"
></app-offline-message>
