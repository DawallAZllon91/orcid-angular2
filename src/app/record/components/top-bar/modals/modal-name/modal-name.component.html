<app-modal>
  <app-modal-header>Names</app-modal-header>
  <app-modal-side-bar>
    <ng-container id="side-bar-title"
    >Given and family names
    </ng-container>
  </app-modal-side-bar>
  <app-modal-footer>
    <button mat-raised-button color="primary" (click)="saveEvent()">
      Save changes
    </button>
    <button mat-stroked-button color="primary" (click)="closeEvent()">
      Cancel
    </button>
  </app-modal-footer>
  <form [formGroup]="namesForm" (ngSubmit)="onSubmit()">
    <div class="mat-body-2 title">
      <strong>Given and family names </strong><span class="required">*</span>
    </div>
    <hr>
    <p class="orc-font-small-print">
      Your given and family names. These are used on your ORCID record by default.
    </p>
    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: namesForm.hasError('required', 'givenNames') }"
      >
        <strong>Given names </strong>
        <span class="required">*</span>
      </label>
    </div>
    <div class="input-container">
      <mat-form-field
        appearance="outline"
        class="mat-form-field-min"
      >
        <input
          id="given-names-input"
          matInput
          formControlName="givenNames"
          placeholder="Add given name"
        />
        <mat-error
          class="mat-caption"
          *ngIf="namesForm.hasError('required', 'givenNames')"
        >
          Please enter your first/given name
        </mat-error>
        <mat-error
          *ngIf="namesForm.hasError('notPattern', 'givenNames')"
        >
          Invalid name characters or format
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row">
      <label
        for="family-names-input"
        class="mat-caption"
      >
        <strong>Family names</strong>
      </label>
    </div>
    <div class="input-container">
      <mat-form-field
        appearance="outline"
        class="mat-form-field-min"
      >
        <input
          id="family-names-input"
          matInput
          formControlName="familyNames"
          placeholder="Add family names"
        />
      </mat-form-field>
    </div>
    <div class="mat-body-2 title">
      <strong>Published name</strong>
    </div>
    <hr>
    <p class="orc-font-small-print">
      Your preferred name format and structure. If added the published name will be used instead of your given and
      family names.
    </p>
    <div class="row">
      <label
        for="published-names-input"
        class="mat-caption"
      >
        <strong>Published name</strong>
      </label>
    </div>
    <div class="row">
      <div class="input-container">
        <mat-form-field
          appearance="outline"
          class="mat-form-field-min"
        >
          <input
            id="published-names-input"
            matInput
            formControlName="publishedName"
            placeholder="Add family names"
          />
        </mat-form-field>
      </div>
      <div class="col l6 no-wrap actions-wrapper no-gutters visibility">
        <app-privacy-selector
          formControlName="visibility"
        ></app-privacy-selector>
      </div>
    </div>
    <!--    <div class="row">-->
    <!--      <div class="input-box">-->
    <!--        <label for="published-name-input" class="mat-caption">-->
    <!--          <strong>Published name</strong>-->
    <!--        </label>-->
    <!--        <input-->
    <!--          id="published-name-input"-->
    <!--          formControlName="publishedName"-->
    <!--          name="publishedName"-->
    <!--          type="text"-->
    <!--          class="mat-body-1"-->
    <!--        />-->
    <!--        <mat-hint class="mat-caption">-->
    <!--          You can format this name however you wish-->
    <!--        </mat-hint>-->
    <!--      </div>-->
    <!--      <div class="col no-wrap actions-wrapper no-gutters visibility">-->
    <!--        <app-privacy-selector-->
    <!--          formControlName="visibility"-->
    <!--        ></app-privacy-selector>-->
    <!--      </div>-->
    <!--    </div>-->
    <div class="mat-body-2 title">
      <strong>My alternative names</strong>
    </div>
    <hr>
    <p class="orc-font-small-print">
      Other variants of your name. Adding these can help people find you record when searching the ORCID registry
    </p>
    <ng-container *ngFor="let otherNames of userRecord.otherNames.otherNames; let i = index">
      <div class="row">
        <div class="input-box">
          <label
            *ngIf="i === 0"
            for="alternative-names-input"
            class="mat-caption"
          >
            <strong>My alternative names</strong>
          </label>
          <input
            id="alternative-names-input"
            name="publishedName"
            type="text"
            class="mat-body-1"
          />
          <mat-hint class="mat-caption">
            <ng-container>Source:</ng-container>
            {{ otherNames.sourceName + ' ' + otherNames.lastModified.year + '-' + otherNames.lastModified.month + '-' + otherNames.lastModified.day}}
          </mat-hint>
          <!--        mobile version -->
          <!--          <div class="col no-wrap actions-wrapper no-gutters visibility">-->
          <!--            <app-privacy-selector-->
          <!--              formControlName="visibility"-->
          <!--            ></app-privacy-selector>-->
          <!--            <div class="delete">-->
          <!--              <button (click)="deleteOtherName(otherNames.putCode)" mat-icon-button>-->
          <!--                <mat-icon-->
          <!--                  class="material-icons-outlined large-material-icon">delete-->
          <!--                </mat-icon>-->
          <!--              </button>-->
          <!--            </div>-->
          <!--          </div>-->
        </div>
        <div class="col no-wrap actions-wrapper no-gutters visibility">
          <app-privacy-selector
            formControlName="visibility"
          ></app-privacy-selector>
          <button (click)="deleteOtherName('caca')" mat-icon-button>
            <mat-icon class="material-icons-outlined large-material-icon"
            >delete
            </mat-icon
            >
          </button>
        </div>
      </div>
    </ng-container>
    <div class="row">
      <a class="col add-more no-gutters" (click)="addOtherName()">
        <mat-icon class="large-material-icon">add_circle</mat-icon>
        <span class="mat-body-1">
            Add another alternative name
          </span>
      </a>
    </div>
  </form>
</app-modal>
