<app-modal [loading]="loading">
  <app-modal-header>
    <ng-container i18n="@@work.works"> Works </ng-container>
  </app-modal-header>
  <app-modal-side-bar>
    <!-- <ng-container id="side-bar-title">
        <a class="side-bar" i18n="@@topBar.biography" (click)="toBiography()">
          Biography
        </a>
      </ng-container>
      <ng-container id="side-bar-url-1">
        <a class="side-bar" i18n="@@shared.visibility" (click)="toVisibility()">
          Visibility
        </a>
      </ng-container> -->
  </app-modal-side-bar>
  <app-modal-footer>
    <button
      mat-raised-button
      color="primary"
      (click)="saveEvent()"
      i18n="@@shared.saveChanges"
      id="save-work-button"
    >
      Save changes
    </button>
    <button
      mat-stroked-button
      color="primary"
      (click)="closeEvent()"
      i18n="@@shared.cancel"
      id="cancel-work-button"
    >
      Cancel
    </button>
  </app-modal-footer>
  <form [formGroup]="workForm">
    <div
      id="biography"
      class="title"
      [ngClass]="{
        'orc-font-body': !platform.columns12,
        'orc-font-body-large': platform.columns12
      }"
    >
      <p>
        <strong i18n="@@topBar.biography"> Work details </strong>
      </p>
    </div>
    <hr />

    <!-- Work Category -->
    <div class="row" [hidden]="!!workTypes">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'workCategory') }"
      >
        <strong i18n="@@topBar.givenNames">Work Category</strong>
        <span class="required">*</span>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="workCategory"
        name="item"
      >
        <mat-option
          *ngFor="let item of workCategories | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
        <mat-error
          *ngIf="workForm.get('workCategory').hasError('required')"
          i18n="@@topBar.invalidBio"
        >
          Invalid characters or format
        </mat-error>
      </mat-select>
    </div>

    <!-- Work Types -->
    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'workType') }"
      >
        <strong i18n="@@topBar.givenNames">Work type</strong>
        <span class="required">*</span>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="workType"
        name="item"
      >
        <mat-option
          *ngFor="let item of workTypes | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
        <mat-error
          *ngIf="workForm.get('workType').hasError('required')"
          i18n="@@topBar.invalidBio"
        >
          Invalid characters or format
        </mat-error>
      </mat-select>
    </div>
    <!-- Title -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'title')
        }"
      >
        <strong i18n="@@topBar.givenNames">Title</strong>
        <span class="required">*</span>
      </label>
    </div>

    <mat-form-field appearance="outline" class="mat-form-field-min">
      <input id="biography-input" matInput formControlName="title" />
      <mat-error
        *ngIf="workForm.get('title').hasError('required')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Work translations title -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'translatedTitleContent')
        }"
      >
        <strong i18n="@@topBar.givenNames">Work translated title</strong>
        <span class="required">*</span>
      </label>
    </div>

    <mat-form-field appearance="outline" class="mat-form-field-min">
      <input
        id="biography-input"
        matInput
        formControlName="translatedTitleContent"
      />
      <mat-error
        *ngIf="workForm.get('translatedTitleContent').hasError('required')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Language of this title -->
    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'translatedTitleLanguage')
        }"
      >
        <strong i18n="@@topBar.givenNames">Language of this title</strong>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="translatedTitleLanguage"
        name="item"
      >
        <mat-option
          *ngFor="let item of languageMap | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
        <mat-error
          *ngIf="workForm.get('translatedTitleLanguage').hasError('required')"
          i18n="@@topBar.invalidBio"
        >
          Invalid characters or format
        </mat-error>
      </mat-select>
    </div>

    <!-- Work subtitle -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'subtitle')
        }"
      >
        <strong i18n="@@topBar.givenNames">Work Subtitle</strong>
        <span class="required">*</span>
      </label>
    </div>

    <mat-form-field appearance="outline" class="mat-form-field-min">
      <input id="biography-input" matInput formControlName="subtitle" />
      <mat-error
        *ngIf="workForm.get('subtitle').hasError('required')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Journal title -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'journalTitle')
        }"
      >
        <strong i18n="@@topBar.givenNames">{{ dynamicTitle }}</strong>
        <span class="required">*</span>
      </label>
    </div>

    <mat-form-field appearance="outline" class="mat-form-field-min">
      <input id="biography-input" matInput formControlName="journalTitle" />
      <mat-error
        *ngIf="workForm.get('journalTitle').hasError('required')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Publication date -->
    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'publicationDateYear')
        }"
      >
        <strong i18n="@@topBar.givenNames">Work Category</strong>
        <span class="required">*</span>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="publicationDateYear"
        name="item"
      >
        <mat-option
          *ngFor="let item of yearOptions | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
      </mat-select>
      <mat-select
        placeholder="Placeholder"
        formControlName="publicationDateMonth"
        name="item"
      >
        <mat-option
          *ngFor="let item of monthOptions | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
      </mat-select>
      <mat-select
        placeholder="Placeholder"
        formControlName="publicationDateDay"
        name="item"
      >
        <mat-option
          *ngFor="let item of dayOptions | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
      </mat-select>
    </div>

    <!-- Work url -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'url')
        }"
      >
        <strong i18n="@@topBar.givenNames">Link</strong>
        <span class="required">*</span>
      </label>
    </div>

    <mat-form-field appearance="outline" class="mat-form-field-min">
      <input id="biography-input" matInput formControlName="url" />
      <mat-error
        *ngIf="workForm.get('url').hasError('required')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Work Citation -->
    <div
      class="title"
      [ngClass]="{
        'orc-font-body': !platform.columns12,
        'orc-font-body-large': platform.columns12
      }"
    >
      <p>
        <strong i18n="@@shared.visibility"> Citation </strong>
      </p>
    </div>
    <hr />

    <!-- Citation type -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'citationType') }"
      >
        <strong i18n="@@topBar.givenNames">Citation type</strong>
        <span class="required">*</span>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="citationType"
        name="item"
      >
        <mat-option
          *ngFor="let item of citationTypes | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
        <mat-error
          *ngIf="workForm.get('citationType').hasError('required')"
          i18n="@@topBar.invalidBio"
        >
          Invalid characters or format
        </mat-error>
      </mat-select>
    </div>

    <!-- Citation  -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'citation') }"
      >
        <strong i18n="@@topBar.givenNames">Citation</strong>
        <span class="required">*</span>
      </label>
    </div>
    <mat-form-field appearance="outline" class="mat-form-field-min">
      <textarea
        matInput
        formControlName="citation"
        cdkTextareaAutosize
        cdkAutosizeMinRows="5"
        cdkAutosizeMaxRows="7"
      >
      </textarea>
      <mat-error
        *ngIf="workForm.get('citation').hasError('notPattern')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Description  -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'shortDescription') }"
      >
        <strong i18n="@@topBar.givenNames">Description</strong>
        <span class="required">*</span>
      </label>
    </div>
    <mat-form-field appearance="outline" class="mat-form-field-min biography">
      <textarea
        id="biography-input"
        matInput
        formControlName="shortDescription"
        cdkTextareaAutosize
        cdkAutosizeMinRows="5"
        cdkAutosizeMaxRows="7"
      >
      </textarea>
      <mat-error
        *ngIf="workForm.get('shortDescription').hasError('notPattern')"
        i18n="@@topBar.invalidBio"
      >
        Invalid characters or format
      </mat-error>
    </mat-form-field>

    <!-- Work identifiers  -->

    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{ error: workForm.hasError('required', 'citation') }"
      >
        <strong i18n="@@topBar.givenNames">Work identifiers</strong>
        <span class="required">*</span>
      </label>
    </div>

    <div formArrayName="workIdentifiers">
      <ng-container
        *ngFor="
          let workIdentifiersGroup of workIdentifiersControls.controls;
          let i = index
        "
      >
        <ng-container [formGroupName]="i">
          <!-- Work identifier type -->
          <div class="row">
            <label
              for="given-names-input"
              class="mat-caption"
              [ngClass]="{
                error: workIdentifiersGroup.hasError(
                  'required',
                  'externalIdentifierType'
                )
              }"
            >
              <strong i18n="@@topBar.givenNames">Identifier type</strong>
              <span class="required">*</span>
            </label>
          </div>
          <div class="row">
            <mat-select
              placeholder="Placeholder"
              formControlName="externalIdentifierType"
              name="item"
            >
              <mat-option *ngFor="let item of workTypes" [value]="item.name">
                {{ item.name }}
              </mat-option>
              <mat-error
                *ngIf="
                  workIdentifiersGroup
                    .get('externalIdentifierType')
                    .hasError('required')
                "
                i18n="@@topBar.invalidBio"
              >
                Invalid characters or format
              </mat-error>
            </mat-select>
          </div>

          <!-- Work identifier value -->

          <div class="row">
            <label
              for="given-names-input"
              class="mat-caption"
              [ngClass]="{
                error: workIdentifiersGroup.hasError(
                  'required',
                  'externalIdentifierId'
                )
              }"
            >
              <strong i18n="@@topBar.givenNames">Identifier value </strong>
              <span class="required">*</span>
            </label>
          </div>

          <mat-form-field appearance="outline" class="mat-form-field-min">
            <input
              id="biography-input"
              matInput
              formControlName="externalIdentifierId"
            />
            <mat-error
              *ngIf="
                workIdentifiersGroup
                  .get('externalIdentifierId')
                  .hasError('required')
              "
              i18n="@@topBar.invalidBio"
            >
              Invalid characters or format
            </mat-error>
          </mat-form-field>

          <!-- Work identifier url value -->

          <div class="row">
            <label
              for="given-names-input"
              class="mat-caption"
              [ngClass]="{
                error: workIdentifiersGroup.hasError(
                  'required',
                  'externalIdentifierUrl'
                )
              }"
            >
              <strong i18n="@@topBar.givenNames">Identifier URL </strong>
              <span class="required">*</span>
            </label>
          </div>

          <mat-form-field appearance="outline" class="mat-form-field-min">
            <input
              id="biography-input"
              matInput
              formControlName="externalIdentifierUrl"
            />
            <mat-error
              *ngIf="
                workIdentifiersGroup
                  .get('externalIdentifierUrl')
                  .hasError('required')
              "
              i18n="@@topBar.invalidBio"
            >
              Invalid characters or format
            </mat-error>
          </mat-form-field>

          <!-- Work identifier url value -->

          <div class="row">
            <label
              for="given-names-input"
              class="mat-caption"
              [ngClass]="{
                error: workIdentifiersGroup.hasError(
                  'required',
                  'externalRelationship'
                )
              }"
            >
              <strong i18n="@@topBar.givenNames">Relationship</strong>
              <span class="required">*</span>
            </label>
          </div>

          <mat-radio-group
            aria-label="Select an option"
            appearance="outline"
            class="mat-form-field-min"
          >
            <mat-radio-button
              *ngFor="let value of workRelationships | keyvalue"
              [value]="value.key"
              >{{ value.value }}
            </mat-radio-button>
          </mat-radio-group>
        </ng-container>
      </ng-container>
    </div>



    <!-- Language of this form -->
    <div class="row">
      <label
        for="given-names-input"
        class="mat-caption"
        [ngClass]="{
          error: workForm.hasError('required', 'languageCode')
        }"
      >
        <strong i18n="@@topBar.givenNames">Language used in this form</strong>
      </label>
    </div>
    <div class="row">
      <mat-select
        placeholder="Placeholder"
        formControlName="languageCode"
        name="item"
      >
        <mat-option
          *ngFor="let item of languageMap | keyvalue"
          [value]="item.key"
        >
          {{ item.value }}
        </mat-option>
        <mat-error
          *ngIf="workForm.get('languageCode').hasError('required')"
          i18n="@@topBar.invalidBio"
        >
          Invalid characters or format
        </mat-error>
      </mat-select>
    </div>

    <!-- Work Visibility -->
    <div
      id="visibility"
      class="title"
      [ngClass]="{
        'orc-font-body': !platform.columns12,
        'orc-font-body-large': platform.columns12
      }"
    >
      <p>
        <strong i18n="@@shared.visibility"> Visibility </strong>
      </p>
    </div>
    <hr />

    <p class="orc-font-small-print" i18n="@@shared.whoCanSeeWork">
      Manage who can see this information in your record.
    </p>
    <div class="col no-wrap actions-wrapper no-gutters visibility">
      <app-privacy-selector formControlName="visibility"></app-privacy-selector>
    </div>
  </form>
</app-modal>
